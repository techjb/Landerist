<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="description" content="Landerist Statistics" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@techjb" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            line-height: 1.4;
            font-size: 16px;
            padding: 0 10px;
            margin: 50px auto;
            max-width: 650px;
        }

        #maincontent {
            max-width: 42em;
            margin-top: 70px;
        }

        canvas {
            margin: 20px 0px;
        }

    </style>
    <title>Statistics</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div id="maincontent">
        <a href="../">< Home</a>

        <h2>
            Statistics
        </h2>

        <div id="Statistics">

        </div>
    </div>

    <script>

        const valuesListings = [/*Listings*/];
        const valuesPublishedListings = [/*PublishedListings*/];
        const valuesUnpublishedListings = [/*UnpublishedListings*/];
        const valuesWebsites = [/*Websites*/];
        const valuesPages = [/*Pages*/];
        const valuesUpdatedPages = [/*UpdatedPages*/];
        const valuesNeedUpdate = [/*NeedUpdate*/];
        const valuesUnknownPageType = [/*NewPages*/];

        CreateChart("ChartListings", "Listings", valuesListings);
        CreateChart("ChartPublishedListings", "Published listings", valuesPublishedListings);
        CreateChart("ChartUnpublishedListings", "Unpublished listings", valuesUnpublishedListings);
        CreateChart("ChartWebsites", "Websites", valuesWebsites);
        CreateChart("ChartPages", "Pages", valuesPages);
        CreateChart("ChartUpdatedPages", "Updated pages", valuesUpdatedPages);
        CreateChart("ChartNeedUpdate", "Need update", valuesNeedUpdate);
        CreateChart("ChartUnknownPageType", "Unknown PageType", valuesUnknownPageType);

        function CreateChart(id, title, values) {
            const dataListings = {
                labels: values.map(row => row.date),
                datasets: [{
                    data: values.map(row => row.count),
                }]
            };

            const config = {
                type: 'line',
                data: dataListings,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: title
                        }
                    }
                },
            };

            const canvas = document.createElement('canvas');
            new Chart(canvas, config);
            document.getElementById("Statistics").appendChild(canvas);
        }
    </script>
</body>
</html>